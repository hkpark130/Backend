spring:
  application:
    name: backoffice-api
  profiles:
    default: local
  ldap:
    urls: "ldap://192.168.2.59:389"
    base: "dc=direa,dc=co,dc=kr"
    username: "cn=admin,dc=direa,dc=co,dc=kr"

---
jasypt:
  encryptor:
    password: mySecretKey

# Local profile: in-memory H2 DB, H2 console enabled, verbose SQL
spring:
  config:
    activate:
      on-profile: local
  datasource:
    url: jdbc:h2:mem:testdb;MODE=MySQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driver-class-name: org.h2.Driver
    username: sa
    password: ""
  ldap:
    password: ENC(WAncVZKBnkwISmBzO6QwmJgmmkkcAoherm9HWwttHmwlx/uRbHmvSw8adPcG9e0X)
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true
    show-sql: true
    defer-datasource-initialization: true
  h2:
    console:
      enabled: true
      path: /h2-console
  # mail:
  #   host: smtp.gmail.com
  #   port: 587
  #   username: test-account@gmail.com
  #   password: app-password-placeholder
  #   properties:
  #     mail:
  #       smtp:
  #         auth: true
  #         starttls:
  #           enable: true
  #           required: true
  #   default-encoding: UTF-8

app:
  cors:
    allowed-origins:
      - http://localhost:5173
  upload:
    dir: uploads
  keycloak:
    url: https://keycloak.direa.synology.me/auth
    realm: sso
    admin-client-id: back-office-api
    admin-client-secret: PGECw0T1tVC5xlfPWwkjjchYwrnZc7eF
  ldap:
    user-base: ${APP_LDAP_USER_BASE:ou=people}
    login-shell: ${APP_LDAP_LOGIN_SHELL:/bin/bash}
    password-length: ${APP_LDAP_PASSWORD_LENGTH:12}

---
# Prod profile: external DB, stricter JPA, no H2 console, minimal logs
spring:
  config:
    activate:
      on-profile: prod
  datasource:
    url: ${DB_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: ${DB_DRIVER:}
  ldap:
    password: ${SPRING_LDAP_PASSWORD}
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        format_sql: false
    show-sql: false
    defer-datasource-initialization: false

app:
  cors:
    allowed-origins:
      - ${CORS_ALLOWED_ORIGINS:https://your-frontend.example.com}
  keycloak:
    url: ${APP_KEYCLOAK_URL}
    realm: ${APP_KEYCLOAK_REALM}
    admin-client-id: ${APP_KEYCLOAK_ADMIN_CLIENT_ID}
    admin-client-secret: ${APP_KEYCLOAK_ADMIN_CLIENT_SECRET}
  ldap:
    user-base: ${APP_LDAP_USER_BASE}
    login-shell: ${APP_LDAP_LOGIN_SHELL:/bin/bash}
    password-length: ${APP_LDAP_PASSWORD_LENGTH:12}

# --- jasypt 설정 (필요 시 활성화) ---
# jasypt:
#   encryptor:
#     password: ${JASYPT_KEY}
#
# app:
#   keycloak:
#     url: ENC(....)
#     realm: ENC(....)
#     admin-client-id: ENC(....)
#     admin-client-secret: ENC(....)
